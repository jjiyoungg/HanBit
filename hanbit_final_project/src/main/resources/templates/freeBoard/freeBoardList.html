<!DOCTYPE html>
<html
  xmlns:th="http://www.thymeleaf.org"
  xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
  layout:decorate="~{layouts/free_layout}"
> <!--/* 위 선언은 타임리프 레이아웃을 사용하기 위한 설정   */-->
<head>
<title>한빛</title>
</head>
 <!--================Start layout Area =================-->
<div layout:fragment="content">

<div class="row">
      <br> <select id="category">
     	<option value="">전체 보기</option>
		<option th:value="자유글">자유글</option>
		<option th:value="정보글">정보글</option>
		<option th:value="실종신고">실종신고</option>
	</select>
      <button type="button" id="findFreeByCategory">검색</button>
      <br>
     
       	<!-- <select id="type">
       		<option selected value="">검색 내용 선택</option>
       		<option th:value="title">제목</option>
       		<option th:value="content">내용</option>
       		<option th:value="nick">작성자</option>
       	</select> -->
       	<input type="text" id="keyword" ></input>
       <button type="button" id="findFreeByKeyword">검색</button>
     


<table class="table table-bordered">
    <thead>
        <tr>
            <th>번호</th>
            <th>작성자</th>
            <th>제목</th>
            <th>작성일자</th>
            <th>조회수</th>
            <th>내용</th>
            <th>카테고리</th>
        </tr>
    </thead>
    <tbody id="freeTbody">
        <tr th:each="board:${FreeBoardList}">
            <td><a th:href="@{/freeDetail?freeNo=} + ${board.freeNo}" th:text="${board.freeNo}"></a></td>
            <td th:text="${board.memberVO.nick}"></td>
            <td><a th:href="@{/freeDetail?freeNo=} + ${board.freeNo}" th:text="${board.title}"></a> </td>
            <td th:text="${board.timePosted}"></td>
            <td th:text="${board.hits}"></td>
            <td th:text="${board.content}"></td>
            <td th:text="${board.category}"></td>
        </tr>
    </tbody>
</table>
 <th:block th:if="${session.mvo!=null}">
 <form th:action="@{freeWrite}">
         <button>
            글쓰기
         </button>
      </form>
</th:block>


    <!--  </th:block>
      </th:block> -->
      <ul class="pagination justify-content-center">
		<th:block th:if="${paging.prev}">
          <li class="page-item active"><a class="page-link" th:href="@{/freeBoardList(page=${paging.startPage-1})}">Pre</a></li>
        </th:block>
        <th:block th:each="num : ${#numbers.sequence(paging.startPage,paging.endPage)}" var="num">
          <li class="page-item"><a class="page-link" th:href="@{/freeBoardList(page=${num})}" th:text="${num}"></a></li>
        </th:block>
        <th:block th:if="${paging.next && paging.endPage>0}">
          <li class="page-item active"><a class="page-link" th:href="@{/freeBoardList(page=${paging.endPage+1})}">Next</a></li>
        </th:block>
       </ul>
      


 <th:block th:if="${session.mvo.memberType == 3}">
 <form th:action="@{/freeReportList}">
         <button>
           신고리스트 보기
         </button>
      </form>
</th:block>

<script type="text/javascript">
			$(function() {
				$("#findFreeByCategory").click(function() {
					let category = $("#category").val();
					$.ajax({
						type : "get",
						url : "findFreeByCategory",
						//dataType:"json", // 문자열 응답이나 thymeleaf ajax 응답시에는 html요소로 응답받기 때문에  dataType=json을 명시하지 않는다
						data : "category=" + category,
						success : function(list) {
							$("#freeTbody").replaceWith(list);//replaceWith
						}
					});//ajax
				});//click
			});//ready
			
			$(function() {
				$("#findFreeByKeyword").click(function() {
					let keyword = $("#keyword").val();
					$.ajax({
						type : "get",
						url : "findFreeByKeyword",
						//dataType:"json", // 문자열 응답이나 thymeleaf ajax 응답시에는 html요소로 응답받기 때문에  dataType=json을 명시하지 않는다
						data : "keyword=" + keyword,
						success : function(list) {
							$("#freeTbody").replaceWith(list);//replaceWith
						}
					});//ajax
				});//click
			});//ready
			
			
			
		</script>


</div>
</div>
 <!--================End layout Area =================-->